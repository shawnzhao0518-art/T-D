<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>T&D Autocare | 专业汽车维修与保养</title>
    <meta name="description" content="T&D Autocare——专业汽车维修、保养、钣金喷漆与轮胎服务。在线预约，透明报价，品质保证。">
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- ✅ 使用根路径防止错版 -->
    <link rel="stylesheet" href="/styles.css" />
    <link rel="icon" href="/logo.png" type="image/png" />
    <!-- ✅ Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  </head>
  <body>
    <a class="skip-link" href="#main">跳到主要内容</a>

    <header class="site-header">
      <div class="container header-inner">
        <a href="#" class="brand">
          <img src="/logo.png" alt="T&D Autocare Logo" class="brand-logo" />
          <span class="brand-name">T&D Autocare</span>
        </a>

        <button class="nav-toggle" aria-expanded="false" aria-controls="site-nav" aria-label="打开菜单">
          <span class="bar"></span><span class="bar"></span><span class="bar"></span>
        </button>

        <nav id="site-nav" class="site-nav" aria-label="主导航">
          <ul>
            <li><a href="#services">服务项目</a></li>
            <li><a href="#about">关于我们</a></li>
            <li><a href="#contact">联系我们</a></li>
            <li><a class="btn btn-primary" href="#booking">在线预约</a></li>
          </ul>
        </nav>

        <button id="lang-toggle" class="lang-toggle">EN / 中文</button>
      </div>
    </header>

    <main id="main">
      <section class="hero">
        <div class="container hero-inner">
          <div class="hero-copy">
            <h1>专业汽车维修与保养</h1>
            <p>透明报价 · 原厂标准 · 快速交付。每一次服务，都让您更放心。</p>
            <div class="hero-cta">
              <a class="btn btn-primary" href="#booking">立即预约</a>
              <a class="btn btn-outline" href="#services">了解服务</a>
            </div>
            <ul class="badges">
              <li>一年/20,000公里质保</li>
              <li>当天快修</li>
              <li>原厂级检测</li>
            </ul>
          </div>
          <div class="hero-media">
            <img src="/hero_garage.png" alt="整洁的绿色主题汽修车间与技师" />
          </div>
        </div>
      </section>

      <section id="services" class="section">
        <div class="container">
          <h2 class="section-title">服务项目</h2>
          <div class="grid services-grid">
            <article class="card">
              <img src="/service_maintenance.png" alt="保养图标" />
              <h3>保养服务</h3>
              <p>更换机油三滤、全车检查、电脑诊断。</p>
            </article>
            <article class="card">
              <img src="/service_engine.png" alt="发动机图标" />
              <h3>发动机/变速箱</h3>
              <p>疑难故障检修、动力系统维护与翻新。</p>
            </article>
            <article class="card">
              <img src="/service_brake.png" alt="刹车图标" />
              <h3>刹车与底盘</h3>
              <p>刹车片/盘更换、减震与悬架校正。</p>
            </article>
            <article class="card">
              <img src="/service_tire.png" alt="轮胎图标" />
              <h3>轮胎与四轮定位</h3>
              <p>轮胎更换、动平衡、四轮定位。</p>
            </article>
            <article class="card">
              <img src="/service_ev.png" alt="新能源图标" />
              <h3>新能源专项</h3>
              <p>高压系统检测、电池健康评估。</p>
            </article>
          </div>
        </div>
      </section>

      <section id="booking" class="section section-accent">
        <div class="container">
          <h2 class="section-title">在线预约</h2>
          <form id="booking-form" class="form card" novalidate>
            <div class="form-row">
              <label>
                <span>姓名</span>
                <input type="text" name="name" required placeholder="您的姓名" />
              </label>
              <label>
                <span>手机</span>
                <input type="tel" name="phone" required placeholder="例如 13800000000" pattern="^\\s*1\\d{10}\\s*$" />
              </label>
            </div>
            <div class="form-row">
              <label>
                <span>车型</span>
                <input type="text" name="car" required placeholder="品牌 / 车型 / 年款" />
              </label>
              <label>
                <span>日期</span>
                <input type="date" name="date" required />
              </label>
            </div>
            <label>
              <span>服务类型</span>
              <select name="service" required>
                <option value="" disabled selected>请选择</option>
                <option>保养服务</option>
                <option>发动机/变速箱</option>
                <option>刹车与底盘</option>
                <option>轮胎与四轮定位</option>
                <option>新能源专项</option>
              </select>
            </label>
            <label>
              <span>备注</span>
              <textarea name="note" rows="3" placeholder="简单描述您的需求或故障现象"></textarea>
            </label>
            <div class="form-actions">
              <button class="btn btn-primary" type="submit">提交预约</button>
              <p id="form-status" role="status" aria-live="polite"></p>
            </div>
          </form>
        </div>
      </section>

      <section id="about" class="section">
        <div class="container about-grid">
          <div>
            <h2 class="section-title">关于 T&D Autocare</h2>
            <p>我们是一家以“专业、透明、守时”为宗旨的现代化汽修中心。团队拥有10年以上品牌4S店经验，配备原厂级诊断设备与工装，严格执行标准化流程。</p>
            <ul class="list-check">
              <li>标准化接车与复检</li>
              <li>维修过程全程可视</li>
              <li>配件来源可追溯</li>
            </ul>
          </div>
          <div class="stats">
            <div class="stat"><span class="num" data-count="5000">0</span><span class="label">+ 累计服务车辆</span></div>
            <div class="stat"><span class="num" data-count="98">0</span><span class="label">% 客户满意度</span></div>
            <div class="stat"><span class="num" data-count="12">0</span><span class="label">年 行业经验</span></div>
          </div>
        </div>
      </section>

      <section id="contact" class="section">
        <div class="container contact-grid">
          <div>
            <h2 class="section-title">联系我们</h2>
            <ul class="contact-list">
              <li><strong>电话：</strong><a href="tel:+61297928828">+61 2 9792 8828</a></li>
              <li><strong>地址：</strong>78 Gibson Ave, Padstow NSW 2211, Australia</li>
              <li><strong>营业时间：</strong>
                <ul>
                  <li>Monday – Friday: 9:00 AM – 5:00 PM</li>
                  <li>Saturday: 9:00 AM – 2:00 PM</li>
                  <li>Sunday: Closed</li>
                </ul>
              </li>
              <li><strong>支付方式：</strong>Apple Pay，及主要银行卡</li>
            </ul>
            <a class="btn btn-outline" href="#booking">预约到店</a>
          </div>
          <div class="map-wrap">
            <a
              href="https://www.google.com/maps/dir/?api=1&destination=78+Gibson+Ave+Padstow+NSW+2211+Australia"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="点击打开 Google 地图导航到 T&D Autocare"
            >
              <iframe
                title="T&D Autocare Location"
                loading="lazy"
                src="https://www.google.com/maps?q=78+Gibson+Ave+Padstow+NSW+2211+Australia&output=embed"
                style="pointer-events:none;width:100%;height:100%;border:0;border-radius:8px;"
              ></iframe>
            </a>
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <a href="#" class="brand small">
          <img src="/logo.png" alt="T&D Autocare Logo" class="brand-logo" />
          <span class="brand-name">T&D Autocare</span>
        </a>
        <p>© <span id="year"></span> T&D Autocare | 诚信经营 · 专业服务</p>
      </div>
    </footer>

    <script type="module" src="/app.js"></script>
    <script type="module">
      const supabaseUrl = 'https://mgrorhbschtyrdrekfhb.supabase.co';
      const supabaseKey = 'sb_publishable_bbYg4Bl2F5uHC_3XqdH2RA_NOnp3wfc';
      const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);
      const bookingForm = document.getElementById('booking-form');
      const statusEl = document.getElementById('form-status');
      const yearEl = document.getElementById('year');
      yearEl.textContent = new Date().getFullYear();

      bookingForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        statusEl.textContent = '提交中，请稍候...';
        const formData = new FormData(bookingForm);
        const record = {
          date: formData.get('date'),
          time: '09:30:00',
          car: formData.get('car') || '未填写',
          mileage: '',
          plate: '',
          project: formData.get('service'),
          price: null,
          contact: `${formData.get('name')} / ${formData.get('phone')}`,
          note: formData.get('note') || ''
        };
        try {
          const { error } = await supabaseClient.from('tasks').insert([record]);
          if (error) throw error;
          statusEl.textContent = '✅ 提交成功！我们会尽快与您联系。';
          bookingForm.reset();
          setTimeout(() => (statusEl.textContent = ''), 3000);
        } catch (err) {
          console.error(err);
          statusEl.textContent = '❌ 提交失败，请稍后重试。';
        }
      });
    </script>
  </body>
</html>
