<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>T&D Autocare | 专业汽车维修与保养</title>
    <meta name="description" content="T&D Autocare——专业汽车维修、保养、钣金喷漆与轮胎服务。在线预约，透明报价，品质保证。">
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles.css" />
    <link rel="icon" href="./logo.png" type="image/png" />
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  </head>

  <body>
    <a class="skip-link" href="#main">跳到主要内容</a>

    <header class="site-header">
      <div class="container header-inner">
        <a href="#" class="brand">
          <img src="./logo.png" alt="T&D Autocare Logo" class="brand-logo" />
          <span class="brand-name">T&D Autocare</span>
        </a>
        <button class="nav-toggle" aria-expanded="false" aria-controls="site-nav" aria-label="打开菜单">
          <span class="bar"></span><span class="bar"></span><span class="bar"></span>
        </button>
        <nav id="site-nav" class="site-nav" aria-label="主导航">
          <ul>
            <li><a href="#services">服务项目</a></li>
            <li><a href="#about">关于我们</a></li>
            <li><a href="#contact">联系我们</a></li>
            <li><a class="btn btn-primary" href="#booking">在线预约</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main id="main">
      <section class="hero">
        <div class="container hero-inner">
          <div class="hero-copy">
            <h1>专业汽车维修与保养</h1>
            <p>透明报价 · 原厂标准 · 快速交付。每一次服务，都让您更放心。</p>
            <div class="hero-cta">
              <a class="btn btn-primary" href="#booking">立即预约</a>
              <a class="btn btn-outline" href="#services">了解服务</a>
            </div>
            <ul class="badges">
              <li>一年/20,000公里质保</li>
              <li>当天快修</li>
              <li>原厂级检测</li>
            </ul>
          </div>
          <div class="hero-media">
            <img src="./hero_garage.png" alt="整洁的绿色主题汽修车间与技师" />
          </div>
        </div>
      </section>

      <section id="booking" class="section section-accent">
        <div class="container">
          <h2 class="section-title">在线预约</h2>
          <form id="booking-form" class="form card" novalidate>
            <div class="form-row">
              <label>姓名<input type="text" name="name" required placeholder="您的姓名" /></label>
              <label>手机<input type="tel" name="phone" required placeholder="例如 13800000000" /></label>
            </div>

            <div class="form-row">
              <label>车型<input type="text" name="car" required placeholder="品牌 / 车型 / 年款" /></label>
              <label>日期<input type="date" name="date" required /></label>
              <label>时间<input type="time" name="time" required /></label>
            </div>

            <label>服务类型
              <input type="text" name="service" required placeholder="请输入您需要的服务（如：更换机油、检查刹车）" />
            </label>

            <label>备注<textarea name="note" rows="3" placeholder="简单描述您的需求或故障现象"></textarea></label>

            <div class="form-actions">
              <button class="btn btn-primary" type="submit">提交预约</button>
              <p id="form-status" role="status" aria-live="polite"></p>
            </div>
          </form>
        </div>
      </section>

      <section id="about" class="section">
        <div class="container about-grid">
          <div>
            <h2 class="section-title">关于 T&D Autocare</h2>
            <p>我们是一家以"专业、透明、守时"为宗旨的现代化汽修中心。团队拥有10年以上品牌4S店经验，配备原厂级诊断设备与工装，严格执行标准化流程。</p>
          </div>
        </div>
      </section>

      <section id="contact" class="section">
        <div class="container contact-grid">
          <div>
            <h2 class="section-title">联系我们</h2>
            <ul class="contact-list">
              <li><strong>电话：</strong><a href="tel:+61297928828">+61 2 9792 8828</a></li>
              <li><strong>地址：</strong>78 Gibson Ave, Padstow NSW 2211, Australia</li>
            </ul>
          </div>
          <div class="map-wrap">
            <iframe
              title="T&D Autocare Location"
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              src="https://www.google.com/maps?q=78+Gibson+Ave+Padstow+NSW+2211+Australia&output=embed">
            </iframe>
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <a href="#" class="brand small">
          <img src="./logo.png" alt="T&D Autocare Logo" class="brand-logo" />
          <span class="brand-name">T&D Autocare</span>
        </a>
        <p>© <span id="year"></span> T&D Autocare | 诚信经营 · 专业服务</p>
      </div>
    </footer>

    <script type="module">
      const supabaseUrl = 'https://mgrorhbschtyrdrekfhb.supabase.co';
      const supabaseKey = 'sb_publishable_bbYg4Bl2F5uHC_3XqdH2RA_NOnp3wfc';
      const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

      const bookingForm = document.getElementById('booking-form');
      const statusEl = document.getElementById('form-status');
      const yearEl = document.getElementById('year');
      if (yearEl) yearEl.textContent = new Date().getFullYear();

      bookingForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        statusEl.textContent = '提交中，请稍候...';

        const formData = new FormData(bookingForm);
        const record = {
          date: formData.get('date'),
          time: formData.get('time') || '09:30:00',
          car: formData.get('car') || '未填写',
          mileage: '',
          plate: '',
          project: formData.get('service'),
          price: null,
          contact: `${formData.get('name')} / ${formData.get('phone')}`,
          note: formData.get('note') || '',
          source: 'customer'
        };

        try {
          const { error } = await supabaseClient.from('tasks').insert([record]);
          if (error) throw error;
          statusEl.textContent = '✅ 提交成功！我们会尽快与您联系。';
          bookingForm.reset();
          setTimeout(() => (statusEl.textContent = ''), 3000);
        } catch (err) {
          console.error(err);
          statusEl.textContent = '❌ 提交失败，请稍后重试。';
        }
      });
    </script>
  </body>
</html>
